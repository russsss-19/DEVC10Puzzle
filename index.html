<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Development Puzzle</title>
  <style>
    body {
      font-family: "Poppins", sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      background-color: #121212;
      color: #fff;
      height: 100vh;
      margin: 0;
      padding-top: 40px;
    }

    h1 {
      font-weight: 700;
      margin-bottom: 10px;
      text-align: center;
    }

    p.description {
      text-align: center;
      max-width: 800px;
      font-size: 1em;
      line-height: 1.6;
      color: #ddd;
      margin-bottom: 30px;
      padding: 0 20px;
    }

    #puzzle-container {
      width: 360px;
      height: 360px;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(3, 1fr);
      gap: 2px;
      border: 5px solid #fff;
      border-radius: 8px;
      background-color: #fff;
      box-shadow: 0 4px 20px rgba(255, 255, 255, 0.2);
      position: relative;
    }

    .piece {
      background-image: url("puzzle.png"); /* <-- image in same folder */
      background-size: 360px 360px;
      width: 100%;
      height: 100%;
      cursor: grab;
      border-radius: 4px;
      transition: transform 0.2s ease;
    }

    .piece:active {
      cursor: grabbing;
      transform: scale(1.05);
    }

    #message {
      margin-top: 20px;
      font-size: 1.2em;
      font-weight: 600;
      text-align: center;
      color: #fff;
    }

    button {
      margin-top: 15px;
      padding: 10px 20px;
      font-size: 1em;
      border: none;
      background-color: #ffcb77;
      color: #333;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      box-shadow: 0 3px 6px rgba(0,0,0,0.3);
      transition: background 0.3s;
    }

    button:hover {
      background-color: #ffe299;
    }

    /* Modal styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 10;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0, 0, 0, 0.8);
    }

    .modal-content {
      background-color: #1e1e1e;
      color: #fff;
      margin: 5% auto;
      padding: 20px;
      border: 2px solid #ffcb77;
      border-radius: 10px;
      width: 90%;
      max-width: 1000px;
      text-align: center;
      box-shadow: 0 4px 20px rgba(255, 255, 255, 0.3);
      position: relative;
    }

    .close {
      color: #ffcb77;
      position: absolute;
      right: 20px;
      top: 10px;
      font-size: 24px;
      font-weight: bold;
      cursor: pointer;
    }

    .close:hover {
      color: #ffe299;
    }

    .slides {
      display: none;
      align-items: center;
      justify-content: center;
      gap: 40px;
      flex-wrap: wrap;
    }

    .slides.active {
      display: flex;
    }

    .slide-image {
      width: 500px;
      height: 500px;
      background-color: #333;
      border-radius: 8px;
      background-size: cover;
      background-position: center;
      flex-shrink: 0;
    }

    .slide-text {
      text-align: left;
      max-width: 400px;
    }

    .slide-text h3 {
      margin: 0 0 10px;
      color: #ffcb77;
      font-size: 1.4em;
    }

    .slide-text p {
      color: #ddd;
      line-height: 1.5;
      font-size: 1em;
    }

    .nav-btns {
      margin-top: 20px;
      display: flex;
      justify-content: center;
      gap: 15px;
    }

    .nav-btns button {
      background-color: #ffcb77;
      border: none;
      color: #333;
      font-weight: 600;
      border-radius: 6px;
      padding: 10px 16px;
      cursor: pointer;
      transition: background 0.3s;
    }

    .nav-btns button:hover {
      background-color: #ffe299;
    }
  </style>
</head>
<body>
  <h1>The Development Puzzle</h1>
  <p class="description">
    Our artefact, titled ‚ÄúThe Development Puzzle,‚Äù represents how different aspects of progress must come together to form a prosperous Philippines. Each puzzle piece stands for a key element that contributes to the nation‚Äôs growth. Just like in a real puzzle, development becomes whole only when all pieces are connected and valued equally. Through this artefact, we emphasize that genuine progress is collective, inclusive, and sustained by cooperation. It is a reminder that every sector and individual plays an essential role in shaping a better future for all.
  </p>

  <div id="puzzle-container"></div>
  <div id="message"></div>
  <button id="shuffle-btn">Shuffle Pieces</button>

  <!-- Modal -->
  <div id="completionModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Development Complete!</h2>

      <!-- Slides -->
      <div class="slides active">
        <div class="slide-image" style="background-image:url('slide1.png');"></div>
        <div class="slide-text">
          <h3>Education & Knowledge</h3>
          <p>Education forms the backbone of national progress, equipping citizens with the skills and wisdom to build a better tomorrow.</p>
        </div>
      </div>

      <div class="slides">
        <div class="slide-image" style="background-image:url('slide2.png');"></div>
        <div class="slide-text">
          <h3>Health & Well-being</h3>
          <p>A healthy nation is a productive nation. Access to quality healthcare ensures resilience and equity for all communities.</p>
        </div>
      </div>

      <div class="slides">
        <div class="slide-image" style="background-image:url('slide3.png');"></div>
        <div class="slide-text">
          <h3>Economic Growth</h3>
          <p>Sustainable economic opportunities empower people, strengthen industries, and uplift communities nationwide.</p>
        </div>
      </div>

      <div class="slides">
        <div class="slide-image" style="background-image:url('slide4.png');"></div>
        <div class="slide-text">
          <h3>Environment & Sustainability</h3>
          <p>Protecting natural resources and promoting green practices ensures that development remains sustainable and inclusive.</p>
        </div>
      </div>

      <div class="slides">
        <div class="slide-image" style="background-image:url('slide5.png');"></div>
        <div class="slide-text">
          <h3>Unity & Cooperation</h3>
          <p>True progress thrives when every sector and citizen works hand in hand ‚Äî united for a prosperous and just Philippines.</p>
        </div>
      </div>

      <div class="nav-btns">
        <button id="prevSlide">Previous</button>
        <button id="nextSlide">Next</button>
      </div>
    </div>
  </div>

  <script>
  const container = document.getElementById("puzzle-container");
  const message = document.getElementById("message");
  const shuffleBtn = document.getElementById("shuffle-btn");
  const modal = document.getElementById("completionModal");
  const closeModal = document.querySelector(".close");

  const slides = document.querySelectorAll(".slides");
  const nextSlide = document.getElementById("nextSlide");
  const prevSlide = document.getElementById("prevSlide");

  let currentSlide = 0;
  const gridSize = 3;
  let pieces = [];

  function createPuzzle() {
    container.innerHTML = "";
    pieces = [];

    for (let row = 0; row < gridSize; row++) {
      for (let col = 0; col < gridSize; col++) {
        const correctIndex = row * gridSize + col;
        const piece = document.createElement("div");
        piece.classList.add("piece");
        piece.draggable = true;
        piece.dataset.correct = correctIndex;
        piece.dataset.current = correctIndex;
        piece.style.backgroundPosition = `${-col * 120}px ${-row * 120}px`;
        pieces.push(piece);
      }
    }

    renderPieces();
    shufflePieces();
    addDragAndDrop();
    addTouchSupport(); // üëà added touch support here
  }

  function shufflePieces() {
    for (let i = pieces.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [pieces[i].dataset.current, pieces[j].dataset.current] = [pieces[j].dataset.current, pieces[i].dataset.current];
    }
    renderPieces();
    message.textContent = "";
  }

  function renderPieces() {
    container.innerHTML = "";
    pieces.sort((a, b) => a.dataset.current - b.dataset.current);
    pieces.forEach(p => container.appendChild(p));
  }

  function addDragAndDrop() {
    let dragged = null;
    pieces.forEach(piece => {
      piece.addEventListener("dragstart", () => {
        dragged = piece;
        setTimeout(() => piece.style.opacity = "0.3", 0);
      });
      piece.addEventListener("dragend", () => {
        piece.style.opacity = "1";
        dragged = null;
      });
      piece.addEventListener("dragover", e => e.preventDefault());
      piece.addEventListener("drop", () => {
        if (dragged && dragged !== piece) {
          const temp = dragged.dataset.current;
          dragged.dataset.current = piece.dataset.current;
          piece.dataset.current = temp;
          renderPieces();
          checkWin();
        }
      });
    });
  }

  // üß© Touch controls for mobile
  function addTouchSupport() {
    let dragged = null;
    let startX, startY;

    pieces.forEach(piece => {
      piece.addEventListener("touchstart", e => {
        dragged = piece;
        piece.style.opacity = "0.4";
        const touch = e.touches[0];
        startX = touch.clientX;
        startY = touch.clientY;
      });

      piece.addEventListener("touchend", e => {
        piece.style.opacity = "1";
        const touch = e.changedTouches[0];
        const endX = touch.clientX;
        const endY = touch.clientY;
        const target = document.elementFromPoint(endX, endY);

        if (target && target.classList.contains("piece") && target !== dragged) {
          const temp = dragged.dataset.current;
          dragged.dataset.current = target.dataset.current;
          target.dataset.current = temp;
          renderPieces();
          checkWin();
        }

        dragged = null;
      });

      // Prevent scrolling while dragging
      piece.addEventListener("touchmove", e => e.preventDefault());
    });
  }

  function checkWin() {
    const solved = pieces.every(p => p.dataset.current === p.dataset.correct.toString());
    if (solved) {
      message.textContent = "Development Complete!";
      modal.style.display = "block";
    } else {
      message.textContent = "";
    }
  }

  // Modal controls
  closeModal.addEventListener("click", () => modal.style.display = "none");
  window.addEventListener("click", e => { if (e.target === modal) modal.style.display = "none"; });

  nextSlide.addEventListener("click", () => {
    slides[currentSlide].classList.remove("active");
    currentSlide = (currentSlide + 1) % slides.length;
    slides[currentSlide].classList.add("active");
  });

  prevSlide.addEventListener("click", () => {
    slides[currentSlide].classList.remove("active");
    currentSlide = (currentSlide - 1 + slides.length) % slides.length;
    slides[currentSlide].classList.add("active");
  });

  shuffleBtn.addEventListener("click", shufflePieces);
  createPuzzle();
</script>
</body>
</html>