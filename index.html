<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Development Puzzle</title>
  <style>
    body {
      font-family: "Poppins", sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      background-color: #121212;
      color: #fff;
      min-height: 100vh;
      margin: 0;
      padding-top: 40px;
      text-align: center;
    }

    h1 {
      font-weight: 700;
      margin-bottom: 10px;
      text-align: center;
    }

    p.description {
      text-align: center;
      max-width: 800px;
      font-size: 1em;
      line-height: 1.6;
      color: #ddd;
      margin-bottom: 30px;
      padding: 0 20px;
    }

    #puzzle-container {
      width: 360px;
      height: 360px;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(3, 1fr);
      gap: 2px;
      border: 5px solid #fff;
      border-radius: 8px;
      background-color: #fff;
      box-shadow: 0 4px 20px rgba(255, 255, 255, 0.2);
      position: relative;
    }

    .piece {
      background-image: url("puzzle.png");
      background-size: 360px 360px;
      width: 100%;
      height: 100%;
      cursor: grab;
      border-radius: 4px;
      transition: transform 0.2s ease;
    }

    .piece:active {
      cursor: grabbing;
      transform: scale(1.05);
    }

    #message {
      margin-top: 20px;
      font-size: 1.2em;
      font-weight: 600;
      text-align: center;
      color: #fff;
    }

    button {
      margin-top: 15px;
      padding: 10px 20px;
      font-size: 1em;
      border: none;
      background-color: #ffcb77;
      color: #333;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      box-shadow: 0 3px 6px rgba(0,0,0,0.3);
      transition: background 0.3s;
    }

    button:hover {
      background-color: #ffe299;
    }

    /* Modal styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 10;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0, 0, 0, 0.8);
    }

    .modal-content {
      background-color: #1e1e1e;
      color: #fff;
      margin: 5% auto;
      padding: 20px;
      border: 2px solid #ffcb77;
      border-radius: 10px;
      width: 90%;
      max-width: 900px;
      text-align: center;
      box-shadow: 0 4px 20px rgba(255, 255, 255, 0.3);
      position: relative;
    }

    .close {
      color: #ffcb77;
      position: absolute;
      right: 20px;
      top: 10px;
      font-size: 24px;
      font-weight: bold;
      cursor: pointer;
    }

    .close:hover {
      color: #ffe299;
    }

    .slides {
      display: none;
      align-items: center;
      justify-content: center;
      gap: 30px;
      flex-wrap: wrap;
    }

    .slides.active {
      display: flex;
    }

    .slide-image {
      width: 300px;
      height: 300px;
      background-color: #333;
      border-radius: 8px;
      background-size: cover;
      background-position: center;
      flex-shrink: 0;
    }

    @media (max-width: 600px) {
      #puzzle-container {
        width: 300px;
        height: 300px;
      }

      .slide-image {
        width: 250px;
        height: 250px;
      }
    }

    .slide-text {
      text-align: left;
      max-width: 400px;
    }

    .slide-text h3 {
      margin: 0 0 10px;
      color: #ffcb77;
      font-size: 1.3em;
    }

    .slide-text p {
      color: #ddd;
      line-height: 1.5;
      font-size: 1em;
    }

    .nav-btns {
      margin-top: 20px;
      display: flex;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
    }

    .nav-btns button {
      background-color: #ffcb77;
      border: none;
      color: #333;
      font-weight: 600;
      border-radius: 6px;
      padding: 10px 16px;
      cursor: pointer;
      transition: background 0.3s;
    }

    .nav-btns button:hover {
      background-color: #ffe299;
    }
  </style>
</head>
<body>
  <h1>The Development Puzzle</h1>
  <p class="description">
    Our artefact, titled “The Development Puzzle,” represents how different aspects of progress must come together to form a prosperous Philippines. Each puzzle piece stands for a key element that contributes to the nation’s growth. Just like in a real puzzle, development becomes whole only when all pieces are connected and valued equally. Through this artefact, we emphasize that genuine progress is collective, inclusive, and sustained by cooperation. It is a reminder that every sector and individual plays an essential role in shaping a better future for all.
  </p>

  <div id="puzzle-container"></div>
  <div id="message"></div>
  <button id="shuffle-btn">Shuffle Pieces</button>
  <button id="version2-btn">Version 2</button>

  <!-- Modal for Version 1 -->
  <div id="completionModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Development Complete!</h2>

      <div class="slides active">
        <div class="slide-image" style="background-image:url('slide1.png');"></div>
        <div class="slide-text">
          <h3>Education & Knowledge</h3>
          <p>Education forms the backbone of national progress, equipping citizens with the skills and wisdom to build a better tomorrow.</p>
        </div>
      </div>

      <div class="slides">
        <div class="slide-image" style="background-image:url('slide2.png');"></div>
        <div class="slide-text">
          <h3>Health & Well-being</h3>
          <p>A healthy nation is a productive nation. Access to quality healthcare ensures resilience and equity for all communities.</p>
        </div>
      </div>

      <div class="slides">
        <div class="slide-image" style="background-image:url('slide3.png');"></div>
        <div class="slide-text">
          <h3>Economic Growth</h3>
          <p>Sustainable economic opportunities empower people, strengthen industries, and uplift communities nationwide.</p>
        </div>
      </div>

      <div class="slides">
        <div class="slide-image" style="background-image:url('slide4.png');"></div>
        <div class="slide-text">
          <h3>Environment & Sustainability</h3>
          <p>Protecting natural resources and promoting green practices ensures that development remains sustainable and inclusive.</p>
        </div>
      </div>

      <div class="slides">
        <div class="slide-image" style="background-image:url('slide5.png');"></div>
        <div class="slide-text">
          <h3>Unity & Cooperation</h3>
          <p>True progress thrives when every sector and citizen works hand in hand — united for a prosperous and just Philippines.</p>
        </div>
      </div>

      <div class="nav-btns">
        <button id="prevSlide">Previous</button>
        <button id="nextSlide">Next</button>
      </div>
    </div>
  </div>

  <!-- Modal for Version 2 -->
  <div id="completionModal2" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Version 2 Complete!</h2>

      <div class="slides2 active">
        <div class="slide-text">
          <h3>Innovation & Technology</h3>
          <p>Innovation fuels progress, enabling efficiency and creativity across sectors for a brighter, tech-empowered nation.</p>
        </div>
      </div>

      <div class="slides2">
        <div class="slide-text">
          <h3>Infrastructure & Connectivity</h3>
          <p>Reliable infrastructure and connectivity bridge communities, creating opportunities and fostering national unity.</p>
        </div>
      </div>

      <div class="slides2">
        <div class="slide-text">
          <h3>Governance & Leadership</h3>
          <p>Transparent, accountable, and visionary leadership drives equitable policies and long-term stability.</p>
        </div>
      </div>

      <div class="slides2">
        <div class="slide-text">
          <h3>Culture & Identity</h3>
          <p>Our diverse culture binds us together, inspiring pride and resilience in every Filipino heart.</p>
        </div>
      </div>

      <div class="slides2">
        <div class="slide-text">
          <h3>Peace & Justice</h3>
          <p>Social harmony and equal justice uphold the dignity of every person and sustain inclusive progress.</p>
        </div>
      </div>

      <div class="slides2">
        <div class="slide-text">
          <h3>Global Cooperation</h3>
          <p>Collaboration with other nations amplifies growth and strengthens our role in global development efforts.</p>
        </div>
      </div>

      <div class="nav-btns">
        <button id="prevSlide2">Previous</button>
        <button id="nextSlide2">Next</button>
        <button id="backToMain">Back to Main Puzzle</button>
      </div>
    </div>
  </div>

  <script>
  const container = document.getElementById("puzzle-container");
  const message = document.getElementById("message");
  const shuffleBtn = document.getElementById("shuffle-btn");
  const version2Btn = document.getElementById("version2-btn");
  const modal1 = document.getElementById("completionModal");
  const modal2 = document.getElementById("completionModal2");
  const closeButtons = document.querySelectorAll(".close");

  const slides1 = document.querySelectorAll(".slides");
  const slides2 = document.querySelectorAll(".slides2");
  const nextSlide = document.getElementById("nextSlide");
  const prevSlide = document.getElementById("prevSlide");
  const nextSlide2 = document.getElementById("nextSlide2");
  const prevSlide2 = document.getElementById("prevSlide2");
  const backToMain = document.getElementById("backToMain");

  let currentSlide1 = 0;
  let currentSlide2 = 0;
  const gridSize = 3;
  let pieces = [];
  let version = 1;

  function createPuzzle() {
    container.innerHTML = "";
    pieces = [];
    const img = version === 1 ? "puzzle.png" : "puzzle2.png";

    for (let row = 0; row < gridSize; row++) {
      for (let col = 0; col < gridSize; col++) {
        const correctIndex = row * gridSize + col;
        const piece = document.createElement("div");
        piece.classList.add("piece");
        piece.draggable = true;
        piece.dataset.correct = correctIndex;
        piece.dataset.current = correctIndex;
        piece.style.backgroundImage = `url('${img}')`;
        piece.style.backgroundSize = "360px 360px";
        piece.style.backgroundPosition = `${-col * 120}px ${-row * 120}px`;
        pieces.push(piece);
      }
    }

    renderPieces();
    shufflePieces();
    addDragAndDrop();
    addTouchSupport();
  }

  function shufflePieces() {
    for (let i = pieces.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [pieces[i].dataset.current, pieces[j].dataset.current] = [pieces[j].dataset.current, pieces[i].dataset.current];
    }
    renderPieces();
    message.textContent = "";
  }

  function renderPieces() {
    container.innerHTML = "";
    pieces.sort((a, b) => a.dataset.current - b.dataset.current);
    pieces.forEach(p => container.appendChild(p));
  }

  function addDragAndDrop() {
    let dragged = null;
    pieces.forEach(piece => {
      piece.addEventListener("dragstart", () => {
        dragged = piece;
        setTimeout(() => piece.style.opacity = "0.3", 0);
      });
      piece.addEventListener("dragend", () => {
        piece.style.opacity = "1";
        dragged = null;
      });
      piece.addEventListener("dragover", e => e.preventDefault());
      piece.addEventListener("drop", () => {
        if (dragged && dragged !== piece) {
          const temp = dragged.dataset.current;
          dragged.dataset.current = piece.dataset.current;
          piece.dataset.current = temp;
          renderPieces();
          checkWin();
        }
      });
    });
  }

  function addTouchSupport() {
    let dragged = null;
    pieces.forEach(piece => {
      piece.addEventListener("touchstart", e => {
        dragged = piece;
        piece.style.opacity = "0.4";
      });

      piece.addEventListener("touchend", e => {
        piece.style.opacity = "1";
        const touch = e.changedTouches[0];
        const target = document.elementFromPoint(touch.clientX, touch.clientY);

        if (target && target.classList.contains("piece") && target !== dragged) {
          const temp = dragged.dataset.current;
          dragged.dataset.current = target.dataset.current;
          target.dataset.current = temp;
          renderPieces();
          checkWin();
        }

        dragged = null;
      });

      piece.addEventListener("touchmove", e => e.preventDefault());
    });
  }

  function checkWin() {
    const solved = pieces.every(p => p.dataset.current === p.dataset.correct.toString());
    if (solved) {
      message.textContent = "Development Complete!";
      if (version === 1) modal1.style.display = "block";
      else modal2.style.display = "block";
    }
  }

  // Modal controls
  closeButtons.forEach(btn => btn.addEventListener("click", () => btn.parentElement.parentElement.style.display = "none"));
  window.addEventListener("click", e => {
    if (e.target.classList.contains("modal")) e.target.style.display = "none";
  });

  // Slide navigation
  function showSlide(slides, index) {
    slides.forEach((s, i) => s.classList.toggle("active", i === index));
  }

  nextSlide.addEventListener("click", () => showSlide(slides1, (currentSlide1 = (currentSlide1 + 1) % slides1.length)));
  prevSlide.addEventListener("click", () => showSlide(slides1, (currentSlide1 = (currentSlide1 - 1 + slides1.length) % slides1.length)));
  nextSlide2.addEventListener("click", () => showSlide(slides2, (currentSlide2 = (currentSlide2 + 1) % slides2.length)));
  prevSlide2.addEventListener("click", () => showSlide(slides2, (currentSlide2 = (currentSlide2 - 1 + slides2.length) % slides2.length)));

  backToMain.addEventListener("click", () => {
    modal2.style.display = "none";
    version = 1;
    createPuzzle();
  });

  version2Btn.addEventListener("click", () => {
    version = 2;
    createPuzzle();
  });

  shuffleBtn.addEventListener("click", shufflePieces);
  createPuzzle();
  </script>
</body>
</html>